<!DOCTYPE HTML>
<html>
<head>
  <script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>
  <script type="text/javascript" src="config1.js"></script> 
  <link rel="apple-touch-icon" sizes="180x180" href="favicon_icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon_icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon_icons/favicon-16x16.png">
  <link rel="manifest" href="favicon_icons/site.webmanifest">
  <link rel="shortcut icon" type="image/x-icon" href="favicon_icons/favicon.ico">
  <link href="font/webfontkit-20220210-002804/stylesheet.css" type="text/css" rel="stylesheet">
  <title>Hypixel Pit Events Tracker</title>
  <meta name="description" content="This program allows you to view the upcoming events in the Hypixel Pit in real time."> 
</head>

<body style="font-family: minecraftregular" background-color="black">
  <div class="img-with-text" display=""><img src="3457688aa57c4d71ab9d22b04f9160db.png" alt="hi!" width=50px, height=auto, style="float:left"><p style="padding: 15px; padding-left: 60px; padding-top: 8px">brookeafk.com</p><span style="position:relative; left:60px; top:-40px;" id="settings" onclick="SettingsMenu()" class="hand_cursor">View Settings</span>
  </div>

<div id="settings-section" style="display: none; position: relative; bottom: 40px;">
<p style="font-size:15px"><span>Theme: </span><span id="settings-theme-dark" onclick='ChangeTheme("dark")'>Dark</span><span> / </span><span id="settings-theme-light" onclick='ChangeTheme("light")'>Light</span></p> 
<p style="font-size:15px"><span>Timestamps: </span><span id="settings-ts-tod" onclick='ToggleTimestamps("tod");' class="hand_cursor">Time of Day</span><span> / </span><span id="settings-ts-tue" onclick='ToggleTimestamps("tue");' class="hand_cursor">Time Until Event</span></p>
<p style="font-size:15px"><span>Flashing pre-event: </span><span id="settings-flash"><span id="settings-flash-60" onclick='EventFlash(60);' class="hand_cursor">60s</span><span> / </span><span id="settings-flash-30" onclick='EventFlash(30);' class="hand_cursor">30s</span><span> / </span><span id="settings-flash-10" onclick='EventFlash(10);' class="hand_cursor">10s</span><span> / </span><span id="settings-flash-0" onclick='EventFlash(-10);' class="hand_cursor">Never</span></span></p>
<p style="font-size:15px"><span>Event reminder sound: </span><span id="settings-audio"><span id="audio-300" onclick='SetAudio(300);' class="hand_cursor">5m</span><span> / </span><span id="audio-180" onclick='SetAudio(180);' class="hand_cursor">3m</span><span> / </span><span id="audio-60" onclick='SetAudio(60);' class="hand_cursor">1m</span><span> / </span><span id="audio-0" onclick='SetAudio(-10);' class="hand_cursor">Never</span></span></p>

<div id="notifications-major" style="display: block; position: absolute; top: -50px; left: 400px; font-size: 15px; color: #FFFFFF;">
  <div><span id="visible-Pizza" onclick='VisibilityToggle("Pizza")' class="hand_cursor">Pizza</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Pizza" onclick='NotifToggle("Pizza")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-Raffle" onclick='VisibilityToggle("Raffle")' class="hand_cursor">Raffle</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Raffle" onclick='NotifToggle("Raffle")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-Squads" onclick='VisibilityToggle("Squads")' class="hand_cursor">Squads</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Squads" onclick='NotifToggle("Squads")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-Blockhead" onclick='VisibilityToggle("Blockhead")' class="hand_cursor">Blockhead</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Blockhead" onclick='NotifToggle("Blockhead")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-Spire" onclick='VisibilityToggle("Spire")' class="hand_cursor">Spire</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Spire" onclick='NotifToggle("Spire")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-Robbery" onclick='VisibilityToggle("Robbery")' class="hand_cursor">Robbery</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Robbery" onclick='NotifToggle("Robbery")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-TeamDeathmatch" onclick='VisibilityToggle("Team Deathmatch")' class="hand_cursor">Team Deathmatch</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-TeamDeathmatch" onclick='NotifToggle("Team Deathmatch")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-RagePit" onclick='VisibilityToggle("Rage Pit")' class="hand_cursor">Rage Pit</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-RagePit" onclick='NotifToggle("Rage Pit")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-Beast" onclick='VisibilityToggle("Beast")' class="hand_cursor">Beast</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Beast" onclick='NotifToggle("Beast")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <br><div id="test-audio" style="color: #ffffff;" onclick='TestAudio()' class="hand_cursor">Preview Audio</div>
</div>
<div id="notifications-minor" style="display: block; position: absolute; top: -50px; left: 550px; font-size: 15px; color: #FFFFFF;">
  <div><span id="visible-DragonEgg" onclick='VisibilityToggle("Dragon Egg")' class="hand_cursor">Dragon Egg</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-DragonEgg" onclick='NotifToggle("Dragon Egg")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-KOTH" onclick='VisibilityToggle("KOTH")' class="hand_cursor">KOTH</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-KOTH" onclick='NotifToggle("KOTH")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-KOTL" onclick='VisibilityToggle("KOTL")' class="hand_cursor">KOTL</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-KOTL" onclick='NotifToggle("KOTL")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-2xRewards" onclick='VisibilityToggle("2x Rewards")' class="hand_cursor">2x Rewards</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-2xRewards" onclick='NotifToggle("2x Rewards")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-CarePackage" onclick='VisibilityToggle("Care Package")' class="hand_cursor">Care Package</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-CarePackage" onclick='NotifToggle("Care Package")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-Auction" onclick='VisibilityToggle("Auction")' class="hand_cursor">Auction</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Auction" onclick='NotifToggle("Auction")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-QuickMaths" onclick='VisibilityToggle("Quick Maths")' class="hand_cursor">Quick Maths</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-QuickMaths" onclick='NotifToggle("Quick Maths")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-GiantCake" onclick='VisibilityToggle("Giant Cake")' class="hand_cursor">Giant Cake</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-GiantCake" onclick='NotifToggle("Giant Cake")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <div><span id="visible-Allbounty" onclick='VisibilityToggle("All bounty")' class="hand_cursor">All bounty</span><svg xmlns="http://www.w3.org/2000/svg" height="12px" viewBox="0 0 24 24" width="24px" fill="#ffffff" id="notif-Allbounty" onclick='NotifToggle("All bounty")' class="hand_cursor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg></div>
  <br><div id="select-all" style="color: #ffffff;" onclick='SelectOnly("major")' class="hand_cursor">Majors Only</div>
  <div id="select-all" style="color: #ffffff;" onclick='SelectOnly("minor")' class="hand_cursor">Minors Only</div>
  <div id="select-all" style="color: #ff7777;" onclick='SelectOnly("nothing")' class="hand_cursor">Deselect All</div>
</div>
</div>
<script>

var HiddenEventCount = 0;
var EventsToLoad = 1;
var version_number = "0.4.1"
var counter = 4;
var settingsOpened = false;
var NormalText = "#000000";
var EventFlashSec = 60;
var AudioTimer = -10;
var DoesStuffExist = false;


var theme = "dark";
var showEventToD = true; //Time of Day
var showEventTuE = true; //Time until Event
var VisibleEvents = ["Quick Maths","Dragon Egg","2x Rewards","Care Package","KOTL","KOTH","Auction","Giant Cake","All bounty","Squads","Beast","Pizza","Rage Pit","Spire","Robbery","Blockhead","Raffle","Team Deathmatch"];
var AudioEvents = [];

var praise_quotes = [`You're crazy.`,"So good brooke.","Cool but seek help please","Counter + Good Spreadsheet","she's insane in the head","brooke your so smart in my opnion","brooke is such a good pit player","your site is fucking incredible","your gsheet is actually amazing wtf","brooke is awesome","great site, I get to see every event I love happen while I'm at school!","very simple and great colors"]
var praise_names = ["Andrew &hearts;","Ellie","oSnapL","1Mad","Emma","catweapon","Twen","C4PS","vnmm","Vermasium","Stampy_fan2","swux"]
var praise_urls = ["http://deviantart.com/hextant","https://twitter.com/ellwixd","https://twitter.com/oSnapLLL","https://youtu.be/dQw4w9WgXcQ","https://twitter.com/cutekitty271","https://namemc.com/profile/354aa68a43694ba29ff23c705dfc11e6","https://twitter.com/KinderFissa","https://twitter.com/c4pshypixel","https://vnmm.dev/","https://namemc.com/profile/9f65cdd1-81d7-49f3-8d41-fef76a7a8768","https://hypixel.net/members/probot.1901786/","https://namemc.com/profile/43206ea4-cc28-40ad-8a29-390e8e4d634e"]
var event_sound = new Audio("event_arriving.mp3");
event_sound.volume = 0.2;


var events = ["Quick Maths","Dragon Egg","2x Rewards","Care Package","KOTL","KOTH","Auction","Giant Cake","All bounty","Squads","Beast","Pizza","Rage Pit","Spire","Robbery","Blockhead","Raffle","Team Deathmatch"]
var eventsNoSpaces = ["QuickMaths","DragonEgg","2xRewards","CarePackage","KOTL","KOTH","Auction","GiantCake","Allbounty","Squads","Beast","Pizza","RagePit","Spire","Robbery","Blockhead","Raffle","TeamDeathmatch"]


document.getElementById('settings').style.color = NormalText;
//document.cookie = "username=John Smith; expires=Sun, 20 Dec 2022 12:00:00 UTC; path=/";

function MakeFunTimestamps(convertible) {
let currentTime = (Date.now);
if (convertible - currentTime() <= 0) {
  convertible = "Passed!"
}
if (convertible - currentTime() <= 60000) {
    convertible = (((Math.floor(((convertible - currentTime())*100))/100000).toFixed(2)) + "s");
} else if (convertible - currentTime() <= 3600000) {
    convertible = ((Math.floor(((convertible - currentTime()))/60000) + "m" + (Math.floor(((convertible - currentTime()))/1000) % 60) + "s"));
} else if (convertible - currentTime() > 1) {
    convertible = ((Math.floor(((convertible - currentTime()))/3600000) + "h" + (Math.floor(((convertible - currentTime()))/60000) % 60) + "m"));
}

return convertible;
}

function EventFlash(seconds) {
  window.EventFlashSec = seconds;
  for(var i = window.HiddenEventCount; i < EventsToLoad; i++) { 
    document.getElementById('event_'+ String(i)).classList.remove("blinktext-light");
    document.getElementById('event_'+ String(i)).classList.remove("blinktext-dark");
  }
  if(seconds == 60) {
    document.getElementById('settings-flash-60').style.color = NormalText;
    document.getElementById('settings-flash-30').style.color = "#888888";
    document.getElementById('settings-flash-10').style.color = "#888888";
    document.getElementById('settings-flash-0').style.color = "#888888"; 
  }
  if(seconds == 30) {
    document.getElementById('settings-flash-30').style.color = NormalText;
    document.getElementById('settings-flash-60').style.color = "#888888";
    document.getElementById('settings-flash-10').style.color = "#888888";
    document.getElementById('settings-flash-0').style.color = "#888888"; 
  }
  if(seconds == 10) {
    document.getElementById('settings-flash-10').style.color = NormalText;
    document.getElementById('settings-flash-30').style.color = "#888888";
    document.getElementById('settings-flash-60').style.color = "#888888";
    document.getElementById('settings-flash-0').style.color = "#888888"; 
  }
  if(seconds == -10) {
    document.getElementById('settings-flash-0').style.color = NormalText;
    document.getElementById('settings-flash-30').style.color = "#888888";
    document.getElementById('settings-flash-10').style.color = "#888888";
    document.getElementById('settings-flash-60').style.color = "#888888"; 
  }
  
}

function SetAudio(seconds) {
  window.AudioTimer = seconds;
  console.log("Audio timer set to " + AudioTimer + " seconds.")
  if(seconds == 300) {
    document.getElementById('audio-300').style.color = NormalText;
    document.getElementById('audio-180').style.color = "#888888";
    document.getElementById('audio-60').style.color = "#888888";
    document.getElementById('audio-0').style.color = "#888888"; 
  }
  if(seconds == 180) {
    document.getElementById('audio-180').style.color = NormalText;
    document.getElementById('audio-300').style.color = "#888888";
    document.getElementById('audio-60').style.color = "#888888";
    document.getElementById('audio-0').style.color = "#888888"; 
  }
  if(seconds == 60) {
    document.getElementById('audio-60').style.color = NormalText;
    document.getElementById('audio-180').style.color = "#888888";
    document.getElementById('audio-300').style.color = "#888888";
    document.getElementById('audio-0').style.color = "#888888"; 
  }
  if(seconds == -10) {
    document.getElementById('audio-0').style.color = NormalText;
    document.getElementById('audio-180').style.color = "#888888";
    document.getElementById('audio-60').style.color = "#888888";
    document.getElementById('audio-300').style.color = "#888888"; 
  }

}

function TestAudio() {
  event_sound.play();
  event_sound.currentTime = 0;
}

function ChangeTheme(themecolour) {
  window.theme = themecolour;
  console.log ("Changed theme to " + window.theme);
  if(themecolour == "light") {
    NormalText = "#000000";
    document.getElementById('settings-theme-dark').style.color = "#888888";
    document.getElementById('settings-theme-light').style.color = NormalText;
    document.body.style.background = "#FFFFFF";
    document.querySelectorAll('p').forEach(e => e.style.color = "black");
    document.getElementById('settings-theme-dark').classList.add("hand_cursor");
    document.getElementById('settings-theme-light').classList.remove("hand_cursor");
  } else if (window.theme == "dark") {
    NormalText = "#FFFFFF";
    document.getElementById('settings-theme-light').style.color = "#888888";
    document.getElementById('settings-theme-dark').style.color = NormalText;
    document.body.style.background = "#222222";
    document.querySelectorAll('p').forEach(e => e.style.color = "white");
    document.getElementById('settings-theme-dark').classList.remove("hand_cursor");
    document.getElementById('settings-theme-light').classList.add("hand_cursor");
  }
  if (showEventToD == true) {
    document.getElementById('settings-ts-tod').style.color = NormalText;
  } else {
    document.getElementById('settings-ts-tod').style.color = "#888888";
  }
  if (showEventTuE == true) {
    document.getElementById('settings-ts-tue').style.color = NormalText;
  } else {
    document.getElementById('settings-ts-tue').style.color = "#888888";
  }
  document.getElementById('settings').style.color = "#888888";
  if (DoesStuffExist == true) {
    EventFlash(window.EventFlashSec);
    SetAudio(window.AudioTimer);
    console.log("Stuff exists. Updating event flashes and audio.")
  }
  for(var i = 1; i <= window.eventsNoSpaces.length; i++) {
    if(VisibleEvents.includes(events[i - 1])) { //if the event is visible...
      document.getElementById('visible-'+ eventsNoSpaces[i - 1]).style.color = NormalText;
    } else {
      document.getElementById('visible-'+ eventsNoSpaces[i - 1]).style.color = "#888888";
    }
  }
  for(var i = 1; i <= window.eventsNoSpaces.length; i++) {
    if(AudioEvents.includes(events[i - 1])) { //if the event is audible...
      document.getElementById('notif-'+ eventsNoSpaces[i - 1]).style.fill = NormalText;
    } else {
      document.getElementById('notif-'+ eventsNoSpaces[i - 1]).style.fill = "#888888";
    }
  }
}

ChangeTheme(theme); //called again later (to make sure)

function ToggleTimestamps(timestamps) {
  if (timestamps == "tod") {
    if(window.showEventToD == true) {
      document.getElementById('settings-ts-tod').style.color = "#888888";
      window.showEventToD = false;
    } else {
      document.getElementById('settings-ts-tod').style.color = NormalText;
      window.showEventToD = true;
    }
  }
  if (timestamps == "tue") {
    if(window.showEventTuE == true) {
      document.getElementById('settings-ts-tue').style.color = "#888888";
      window.showEventTuE = false;
    } else {
      document.getElementById('settings-ts-tue').style.color = NormalText;
      window.showEventTuE = true;
    }
  }
}

function SelectOnly(event_type) {
  if(event_type == "minor") {
  for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
      if (window.data[i]['type'] == "major") {
      document.getElementById('event_' + String(i)).style.display = "none";
      console.log("hehe")
      }
      if (window.data[i]['type'] == "minor") {
      document.getElementById('event_' + String(i)).style.display = "block";
      console.log("hehe")
      }
      window.VisibleEvents = ["Quick Maths","Dragon Egg","2x Rewards","Care Package","KOTL","KOTH","Auction","Giant Cake","All bounty"];
    }
  } else if(event_type == "major") {
    for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
      if (window.data[i]['type'] == "minor") {
      document.getElementById('event_' + String(i)).style.display = "none";
      console.log("hehe")
      }
      if (window.data[i]['type'] == "major") {
      document.getElementById('event_' + String(i)).style.display = "block";
      console.log("hehe")
      }
      window.VisibleEvents = ["Squads","Beast","Pizza","Rage Pit","Spire","Robbery","Blockhead","Raffle","Team Deathmatch"];
    }

  } else if(event_type == "nothing") {
  window.VisibleEvents = [];
  window.AudioEvents = [];
  for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
      document.getElementById('event_' + String(i)).style.display = "none";
    }
  }
  ChangeTheme(theme);
}

function GeneratePraise() {
  const randomElement = [Math.floor(Math.random() * (praise_quotes.length + 3)) - 3]; //adds slight bias to quote #0
  console.log(randomElement);
  if(randomElement <= -1) {
    randomElement[0] = 0;
  }
  return (`"` + praise_quotes[randomElement] + `" -<a href="` + praise_urls[randomElement] + `" target="_blank">` + praise_names[randomElement] + `</a>`);
}

function TimeOfDay(s) {
var offset = (new Date().getTimezoneOffset())*-60000;
return new Date(s + offset).toISOString().slice(-13, -8);
}

const lightColours = ["#D9D2E9","#E9D2E1","#D2E9DD","#E9E2D2","#D2E9D2","#D2E9E8","#E9DDD2","#E9D2D2","#E9E3D2","#8EBAEC","#8EEC94","#ECB38E","#EC8E8E","#EC8EEC","#ECE98E","#9191EC","#ECBD8E","#BA8EEC"]
const darkColours = ["#321433","#33142b","#143321","#332314","#1e3314","#143333","#332a14","#261433","#2f3314","#206dc5","#20c541","#c59f20","#c52320","#c520c3","#c5c320","#2323c5","#c0c020","#7320c5"]

function test_zero(conversion) { //adds cute colours
for(var i = window.HiddenEventCount; i < EventsToLoad; i++) { 
  if (window.theme == "light") {
    document.getElementById('event_' + String(i)).style.backgroundColor =lightColours[events.indexOf(conversion[i]['event'])];
  }
  if (window.theme == "dark") {
    document.getElementById('event_' + String(i)).style.backgroundColor =darkColours[events.indexOf(conversion[i]['event'])];
  }
 if(conversion[i]['type'] == "major") {
  document.getElementById('event_' + String(i)).style.fontFamily = "minecraftbold";
 }
 document.getElementById('event_' + String(i)).style.color = NormalText;
 let currentTime = (Date.now);
 if ((conversion[i]['timestamp'] - currentTime() <= (EventFlashSec * 1000) && (conversion[i]['timestamp'] - currentTime()) % 1000 > 900) && (theme == "light")) {
  document.getElementById('event_'+ String(i)).classList.add("blinktext-light");
  document.getElementById('event_'+ String(i)).classList.remove("blinktext-dark");
 }
 if ((conversion[i]['timestamp'] - currentTime() <= (EventFlashSec * 1000) && (conversion[i]['timestamp'] - currentTime()) % 1000 > 900) && (theme == "dark")) {
  document.getElementById('event_'+ String(i)).classList.add("blinktext-dark");
  document.getElementById('event_'+ String(i)).classList.remove("blinktext-light");
 }
}
}

const pp_url = ('https://events.mcpqndq.dev/?key=' + config1);
data_backup = MakeAPIAndHTML();
console.log("The data's been called!")
setInterval(getPitPanda,40);

async function MakeAPIAndHTML() { //Calls the API exactly once (thanks McPqndq for pointing out that i do not have to call apis more than once)
  const response = await fetch(pp_url);
  window.data = await response.json();
  window.data_backup = window.data;
  window.EventsToLoad = Object.keys(window.data).length
  console.log("Loading events: " + window.EventsToLoad);
  console.log("API Called.")
  for(var i = 0; i < window.EventsToLoad; i += 1) { //Make HTML elements
    var div = document.createElement("div");
    console.log("I made an element.")
    div.id = ("event_" + i);
    div.innerHTML = ("[loading event]");
    div.style.padding = "15px"; 
    div.style.backgroundColor = "#222222";
    div.style.textAlign = "left";
    div.style.fontSize = "1.5em"
    div.style.lineHeight = "100%"
   document.body.appendChild(div);

}
  var p = document.createElement("p");
  console.log("Added footer.")
  //p.style.marginTop = (String(50*i) + "px")
  p.id = ("version")
  p.innerHTML = ("v" + window.version_number);
  document.body.appendChild(p);
  var q = document.createElement("p");
  q.id = ("special_thanks")
 // q.style.marginTop = (String(50) + "px")
  q.innerHTML = (GeneratePraise());
  document.body.appendChild(q);
  ChangeTheme(theme); //just again to make sure 
  EventFlash(60); //setting everything up!
  SetAudio(-10);
  DoesStuffExist = true;
}

function AudioChecker() {
  let currentTime = (Date.now);
  for(var i = window.HiddenEventCount; i <= window.HiddenEventCount + 3; i++) {
    if (window.AudioEvents.includes(window.data[i]['event'])  && window.data[i]['timestamp'] - currentTime() <= (AudioTimer * 1000 + 1000) && window.data[i]['timestamp'] - currentTime() >= (AudioTimer * 1000 - 1000)) {
    event_sound.play();
 }
}
}

function RapidFirst(transformation) { //this plops the stuff in the actual html page
  for(var i = window.HiddenEventCount; i <= window.HiddenEventCount; i++) { 
  if (showEventToD == true && showEventTuE == true) {
  document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + MakeFunTimestamps(transformation[i].timestamp) + `: </span><span> ` + transformation[i].event + `</span><span style="font-family: minecraftregular"> (` + TimeOfDay(transformation[i].timestamp) + ") </span>");
  } else if (showEventToD == false && showEventTuE == true) {
  document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + MakeFunTimestamps(transformation[i].timestamp) + `: </span><span> ` + transformation[i].event + `</span><span style="font-family: minecraftregular"> </span>`);
  } else if (showEventToD == true && showEventTuE == false) {
  document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + TimeOfDay(transformation[i].timestamp) + `: </span><span> ` + transformation[i].event + `</span><span style="font-family: minecraftregular"> </span>`);
  } else if (showEventToD == false && showEventTuE == false) {
  document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + transformation[i].event + `</span>`);
  }
  if(MakeFunTimestamps(transformation[i].timestamp) == "Passed!" && !!document.getElementById('event_' + String(i)) == true) {
    //document.getElementById('event_' + String(i)).remove();
    for(var j = 0; j <= i; j++) {
      document.getElementById('event_' + String(j)).style.display = "none"; //This should get rid of some bugs with events not hiding.
    }
    window.HiddenEventCount = window.HiddenEventCount + 1; 
    document.getElementById('special_thanks').innerHTML = GeneratePraise()
  }
}
}

function UpdateEverything(transformation) { //this plops the stuff in the actual html page
  for(var i = window.HiddenEventCount + 1; i < EventsToLoad; i++) { 
  if (showEventToD == true && showEventTuE == true) {
  document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + MakeFunTimestamps(transformation[i].timestamp) + `: </span><span> ` + transformation[i].event + `</span><span style="font-family: minecraftregular"> (` + TimeOfDay(transformation[i].timestamp) + ") </span>");
  } else if (showEventToD == false && showEventTuE == true) {
  document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + MakeFunTimestamps(transformation[i].timestamp) + `: </span><span> ` + transformation[i].event + `</span><span style="font-family: minecraftregular"> </span>`);
  } else if (showEventToD == true && showEventTuE == false) {
  document.getElementById('event_' + String(i)).innerHTML = (`<span style="font-family: minecraftregular">` + TimeOfDay(transformation[i].timestamp) + `: </span><span> ` + transformation[i].event + `</span><span style="font-family: minecraftregular"> </span>`);
  } else if (showEventToD == false && showEventTuE == false) {
  document.getElementById('event_' + String(i)).innerHTML = (`<span>` + transformation[i].event + `</span>`);
  }
  if(MakeFunTimestamps(transformation[i].timestamp) == "Passed!" && !!document.getElementById('event_' + String(i)) == true) { //in an ideal world this should NEVER be called but js can be weird as hell sometimes
    //document.getElementById('event_' + String(i)).remove();
    document.getElementById('event_' + String(i)).style.display = "none";
    window.HiddenEventCount = window.HiddenEventCount + 1; 
  }
 }
}

function VisibilityToggle(toggle) {
  if (window.VisibleEvents.includes(toggle)) {
    const index = window.VisibleEvents.indexOf(toggle);
    if (index > -1) {
      window.VisibleEvents.splice(index, 1);
      document.getElementById('visible-' + toggle.replace(/\s/g, '')).style.color = "#888888";
    }
    for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
    if (window.data[i]["event"].includes(toggle)) {
      document.getElementById('event_' + String(i)).style.display = "none";
    }
  }
  } else {
    window.VisibleEvents.push(toggle);
    document.getElementById('visible-' + toggle.replace(/\s/g, '')).style.color = NormalText;
    for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
    if (window.data[i]["event"].includes(toggle)) {
      document.getElementById('event_' + String(i)).style.display = "block";
    }
    }
  }
  console.log("List of events that are visible:")
  console.log(window.VisibleEvents);
}

function NotifToggle(toggle) {
  if (window.AudioEvents.includes(toggle)) {
    const index = window.AudioEvents.indexOf(toggle);
    if (index > -1) {
      window.AudioEvents.splice(index, 1);
      document.getElementById('notif-' + toggle.replace(/\s/g, '')).style.fill = "#888888";
    }
  } else {
    window.AudioEvents.push(toggle);
    document.getElementById('notif-' + toggle.replace(/\s/g, '')).style.fill = NormalText;
    for(var i = window.HiddenEventCount; i < EventsToLoad; i++) {
    }
}
  console.log("List of events that a sound will play for:")
  console.log(window.AudioEvents);
}

function SettingsMenu() {
  if(settingsOpened == false) {
    document.getElementById('settings').style.color = "#888888";
    settingsOpened = true;
    document.getElementById('settings-section').style.display = "block";
    console.log("set to true");
  } else if(settingsOpened == true) {
    document.getElementById('settings').style.color = NormalText;
    settingsOpened = false;
    console.log("set to false");
    document.getElementById('settings-section').style.display = "none";
  }
  
}

function getPitPanda() {
  window.data = window.data_backup;
  test_zero(window.data);
  counter = counter + 1;
  if (counter == 5) {
    counter = 0;
    UpdateEverything(window.data);
    console.log("Updated 2nd-n values.")
    AudioChecker();
  }
  RapidFirst(window.data);
  console.log("Updated 1st value.");
}


  </script>

<style>
  a:link {
    color: #B15AC2;
    background-color: transparent;
    text-decoration: none;
  }
  
  a:visited {
    color: #725279;
    background-color: transparent;
    text-decoration: none;
  }
  
  a:hover {
    color: #E7C2EE;
    background-color: transparent;
    text-decoration: underline;
  }
  
  a:active {
    color: #EDDDF0;
    background-color: transparent;
    text-decoration: underline;
  }

  p {
    font-size: 1.5em
  }
  
  .blinktext-light {
	-webkit-animation: blink-text-light 1000ms linear infinite;
	-moz-animation: blink-text-light 1000ms linear infinite;
	-ms-animation: blink-text-light 1000ms linear infinite;
	-o-animation: blink-text-light 1000ms linear infinite;
	 animation: blink-text-light 1000ms linear infinite;
}
.blinktext-dark {
	-webkit-animation: blink-text-dark 1000ms linear infinite;
	-moz-animation: blink-text-dark 1000ms linear infinite;
	-ms-animation: blink-text-dark 1000ms linear infinite;
	-o-animation: blink-text-dark 1000ms linear infinite;
	 animation: blink-text-dark 1000ms linear infinite;
}
@keyframes blink-text-light {
	0% { color: #FF0000; opacity: 1; }
	10% { color: #e80000;opacity: 1; }
	15% { color: #d10000;opacity: 1; }
	20% { color: #b80000;opacity: 1; }
	25% { color: #a30000;opacity: 1; }
	30% { color: #8c0000;opacity: 1; }
	35% { color: #750000;opacity: 1; }
	40% { color: #5e0000;opacity: 1; }
	45% { color: #470000;opacity: 1; }
	49% { color: #300000;opacity: 1; }
	50% { color: #190000;opacity: 1; }
}
@keyframes blink-text-dark {
	0% { color: #c00000; opacity: 1; }
	10% { color: #c51a1a;opacity: 1; }
	15% { color: #ca3333;opacity: 1; }
	20% { color: #cf4d4d;opacity: 1; }
	25% { color: #d56666;opacity: 1; }
	30% { color: #da8080;opacity: 1; }
	35% { color: #e59999;opacity: 1; }
	40% { color: #eab3b3;opacity: 1; }
	45% { color: #f5cccc;opacity: 1; }
	49% { color: #fae6e6;opacity: 1; }
	50% { color: #ffffff;opacity: 1; }
}

.hand_cursor {
  cursor: pointer;
}

#settings-section {
  display: none;
  margin-left: 60px;
}

  </style>

</body>

</html>